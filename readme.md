# ü§ñ Intelligent .NET Commit Analysis with AI (Gemini)

## üìå About

This project integrates **AI-powered commit analysis** directly into GitHub repositories.
Whenever a commit is pushed, the system:

1. Captures the **code diff**.
2. Sends it to **Gemini AI** for analysis.
3. Generates a **report of potential issues** (security, logic, best practices).
4. Automatically creates a **GitHub issue** with severity labels (`Critical`, `High`, `Medium`, `Low`).

The goal is to **improve code quality** and **prevent bugs** before they reach production.

---

## ‚öôÔ∏è How It Works

```plaintext
Commit ‚Üí GitHub Actions ‚Üí AI Analysis (Gemini) ‚Üí GitHub Issue
```

* **GitHub Actions**: Automates workflow on push to `main` or `develop`.
* **Python scripts** (`analyze_diff.py`, `create_issue.py`): Extract diffs and integrate with Gemini.
* **Gemini AI / Vertex AI**: Detects potential code issues and generates a Markdown report.
* **GitHub API**: Creates issues with detailed findings and severity labels.

---

## üìã Example Report

```markdown
## üîç Commit Analysis Report
**Commit:** abc123 | **Branch:** main | **Author:** @nathalia  

### ‚ö†Ô∏è Detected Issues
- **Critical:** Use of `Thread.Sleep` in async environment  
- **High:** Missing input validation in public method  
- **Medium:** Outdated comments  
- **Low:** Non-descriptive variable name  

**Improvement Suggestions:** (optional)

_Analysis automatically generated by Gemini AI._
```

---

## üîë Setup

### 1Ô∏è‚É£ Create a Service Account for Gemini / Vertex AI

1. Go to [Google Cloud Console](https://console.cloud.google.com/) and select your project.
2. Navigate to **IAM & Admin ‚Üí Service Accounts**.
3. Click **Create Service Account**, give it a name (e.g., `gemini-automation`).
4. Assign the **Vertex AI User** role (or additional roles as needed).
5. After creating, go to **Keys ‚Üí Add Key ‚Üí Create New Key ‚Üí JSON**.
6. Download the JSON file and **keep it secure**.

### 2Ô∏è‚É£ Configure GitHub Secrets

In your repository settings, go to **Settings ‚Üí Secrets and Variables ‚Üí Actions** and create:

* `GOOGLE_CREDENTIALS` ‚Üí Copy the **entire content** of the JSON file.
* `GH_TOKEN` ‚Üí GitHub Personal Access Token with **repo:issues** permission.

### 3Ô∏è‚É£ Add Workflow

Add `.github/workflows/analyze-commit.yml`:

```yaml
on:
  push:
    branches:
      - main
      - develop

jobs:
  analyze:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
        with:
          fetch-depth: 2

      - name: Set up Python
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'

      - name: Install dependencies
        run: pip install requests python-dotenv google-cloud-aiplatform

      - name: Run commit analysis
        env:
          GOOGLE_CREDENTIALS: ${{ secrets.GOOGLE_CREDENTIALS }}
          GH_TOKEN: ${{ secrets.GH_TOKEN }}
        run: python scripts/analyze_diff.py
```

### 4Ô∏è‚É£ Push a Commit

After pushing a commit to `main` or `develop`, the workflow will:

* Extract the diff.
* Send it to Gemini AI via Vertex AI.
* Generate a Markdown report.
* Create a GitHub issue with severity labels.

---

## ‚ö° Notes

* First commit or commits without changes will generate a **mock report**.
* Labels are automatically assigned based on severity detected in the report.
* The system is fully extensible to multiple languages and integrations.

---

With this project, **Gemini AI becomes your automated code reviewer** ‚Äî always analyzing and helping you write better code.